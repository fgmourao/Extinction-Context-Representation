%% Data pre-processing to EEG lab - OpenField 

%  Output: - EEG.data
%          - EEG.srate (sample rate)

%%
% by Flavio Mourao. Nucleo de Neurociencias - NNC.
% email: mourao.fg@gmail.com
% Universidade Federal de Minas Gerais. 
% Started in:  02/2020
% Last update: 01/2023

%%
fprintf('\nData pre-processing to EEG lab ... \n');

%% Prepare to EEGlab

EEG.srate = parameters.original_srate; % Sample rate
EEG.data  = data.lfp{5,2} ;


% Channel Location

field1 = 'labels';      value1 = {'1';'2';'3';'4';'5';'6';'7';'8';'9';'10';'11';'12';'13';'14';'15';'16';'17';'18';'19';'20';'21'};
field2 = 'theta';       value2 = {18;-54;-39.0000000000000;0;39.0000000000000;54;-90;[];-90;90;90;[];0;39.0000000000000;54;-90;[];-90;90;90;[]};
field3 = 'radius';      value3 = {0.511111111111111;0.511111111111111;0.333333333333333;0.255555555555556;0.333333333333333;0.511111111111111;0.511111111111111;[];0.255555555555556;0;0.255555555555556;[];0.255555555555556;0.333333333333333;0.511111111111111;0.511111111111111;[];0.255555555555556;0;0.255555555555556;[]};
field4 = 'X';           value4 = {-0.308828749571334;0.808524163080882;0.545007445768716;0;-0.545007445768716;-0.808524163080882;0.999390827019096;[];0.719339800338651;-6.12323399573677e-17;-0.719339800338651;[];0.694658370458997;0.500000000000000;-0.0348994967025009;-0.0348994967025010;[];0.694658370458997;1;0.694658370458997;[]};
field5 = 'Y';           value5 = {-0.0348994967025010;-0.0348994967025009;0.500000000000000;0.694658370458997;0.500000000000000;-0.0348994967025009;-0.0348994967025010;[];0.694658370458997;1;0.694658370458997;[];0.694658370458997;0.500000000000000;-0.0348994967025009;-0.0348994967025010;[];0.694658370458997;1;0.694658370458997;[]};
field6 = 'Z';           value6 = {-0.0348994967025010;-0.0348994967025009;0.500000000000000;0.694658370458997;0.500000000000000;-0.0348994967025009;-0.0348994967025010;[];0.694658370458997;1;0.694658370458997;[];0.694658370458997;0.500000000000000;-0.0348994967025009;-0.0348994967025010;[];0.694658370458997;1;0.694658370458997;[]};
field7 = 'sph_theta';   value7 = {-18;54;39.0000000000000;0;-39.0000000000000;-54;90;[];90;-90;-90;[];0;-39.0000000000000;-54;90;[];90;-90;-90;[]};
field8 = 'sph_phi';     value8 = {-2;-2.00000000000000;30.0000000000000;44;30.0000000000000;-2.00000000000000;-2;[];44;90;44;[];44;30.0000000000000;-2.00000000000000;-2;[];44;90;44;[]};
field9 = 'sph_radius';  value9 = {1;1;1;1;1;1;1;[];1;1;1;[];1;1;1;1;[];1;1;1;[]};
field10 = 'type';       value10 = {'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';''};
field11 = 'ref';        value11 = {'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';'';''};
field12 = 'urchan';     value12 = {2;11;3;17;4;12;20;13;5;18;6;14;11;3;17;4;12;20;13;5;18};

EEG.chanlocs = struct(field1,value1,field2,value2,field3,value3,field4,value4,field5,value5,field6,value6,field7,value7,field8,value8,field9,value9,field10,value10,field11,value11,field12,value12);


%% 
clear -regexp ^field ^value  

%%

save('M1_1_to_EEGLab','EEG','-v7.3')

%%
EEG.srate = EEG.data.srate;
EEG.data = EEG.data.data;


%%

save('M1_1_from_EEGLab','EEG','-v7.3')

%%


%%
fprintf('\nDone.\n\n');

%% last update 18/01/2023 - 14:51
%  listening: GYBE - John Hughes (aka: She Dreamt She Was a Bulldozer, She Dreamt She Was Alone In an Empty Field)
